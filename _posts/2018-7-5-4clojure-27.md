---
layout: post
title: 4clojure-27
---

<pre><code class="language-klipse">(ns live.test
  (:require [cljs.test :refer-macros [deftest is testing run-tests]]))
  
(defn mypal [s]
  (= (seq s) (reverse (seq s))))

(deftest test-27
  (is (false? (mypal '(1 2 3 4 5))))
  (is (true? (mypal "racecar")))
  (is (true? (mypal [:foo :bar :foo])))
  (is (true? (mypal '(1 1 3 3 1 1))))
  (is (false? (mypal '(:a :b :c)))))

(defn makeflat [s]
  (filter (complement sequential?)
    (rest (tree-seq sequential? seq s))))

(deftest test-28
  (is (= (makeflat '((1 2) 3 [4 [5 6]])) '(1 2 3 4 5 6)))
  (is (= (makeflat ["a" ["b"] "c"]) '("a" "b" "c")))
  (is (= (makeflat '((((:a))))) '(:a))))

(defn getcaps [s]
  (apply str (re-seq #"[A-Z]" s)))

(deftest test-29
  (is (= (getcaps "HeLlO, WoRlD!") "HLOWRD"))
  (is (empty? (getcaps "nothing")))
  (is (= (getcaps "$#A(*&987Zf") "AZ")))

(defn compress [s]
  (map first
    (partition-by identity s)))

(deftest test-30
  (is (= (apply str (compress "Leeeeeerrroyyy")) "Leroy"))
  (is (= (compress [1 1 2 3 3 2 2 3]) '(1 2 3 2 3)))
  (is (= (compress [[1 2] [1 2] [3 4] [1 2]]) '([1 2] [3 4] [1 2]))))
  
(defn pack [s]
  (partition-by identity s))

(deftest test-31
  (is (= (pack [1 1 2 1 1 1 3 3]) '((1 1) (2) (1 1 1) (3 3))))
  (is (= (pack [:a :a :b :b :c]) '((:a :a) (:b :b) (:c))))
  (is (= (pack [[1 2] [1 2] [3 4]]) '(([1 2] [1 2]) ([3 4])))))

(run-tests)
</code></pre>
